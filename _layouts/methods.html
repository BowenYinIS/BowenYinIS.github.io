---
layout: archive
---

{{ content }}


<!--<ul class="taxonomy__index">-->
<!--  {% assign postsByMethod = site.posts | where_exp: "item", "item.hidden != true" | group_by_exp: 'item', 'item.methods | default: "Untyped"' %}-->
<!--  {% for method in postsByMethod %}-->
<!--    <li>-->
<!--      <a href="#{{ method.name }}">-->
<!--        <strong>{{ method.name }}</strong> <span class="taxonomy__count">{{ method.items | size }}</span>-->
<!--      </a>-->
<!--    </li>-->
<!--  {% endfor %}-->
<!--</ul>-->


<!--{% assign entries_layout = page.entries_layout | default: 'list' %}-->
<!--{% assign postsByMethod = site.posts | where_exp: "item", "item.hidden != true" | group_by_exp: 'item', 'item.methods | default: "Untyped"' %}-->
<!--{% for method in postsByMethod %}-->
<!--  <section id="{{ method.name }}" class="taxonomy__section">-->
<!--    <h2 class="archive__subtitle">{{ method.name }}</h2>-->
<!--    <div class="entries-{{ entries_layout }}">-->
<!--      {% for post in method.items %}-->
<!--        {% include archive-single.html type=entries_layout %}-->
<!--      {% endfor %}-->
<!--    </div>-->
<!--    <a href="#page-title" class="back-to-top">{{ site.data.ui-text[site.locale].back_to_top | default: 'Back to Top' }} &uarr;</a>-->
<!--  </section>-->
<!--{% endfor %}-->


{% assign all_methods = '' %}

{% for post in site.posts %}
  {% unless post.hidden %}
    {% if post.methods %}
      {% for method in post.methods %}
        {% assign all_methods = all_methods | append: method | append: ',' %}
      {% endfor %}
    {% else %}
      {% assign all_methods = all_methods | append: 'Untyped,' %}
    {% endif %}
  {% endunless %}
{% endfor %}

{% assign methods = all_methods | split: ',' | uniq %}
{% assign methods_with_counts = '' %}

{% for method in methods %}
  {% assign count = site.posts | where_exp: "item", "item.hidden != true" | where_exp: "item", "item.methods contains method or (method == 'Untyped' and item.methods == nil)" | size %}
  {% assign methods_with_counts = methods_with_counts | append: method | append: ',' | append: count | append: ',' %}
{% endfor %}

{% assign method_counts = methods_with_counts | split: ',' %}
{% assign sorted_methods = '' %}

{% for i in (0..method_counts.size) step: 2 %}
  {% if method_counts[i] %}
    {% assign method_count_pair = method_counts[i] | append: ',' | append: method_counts[i+1] %}
    {% assign sorted_methods = sorted_methods | append: method_count_pair | append: '|' %}
  {% endif %}
{% endfor %}

{% assign sorted_methods = sorted_methods | split: '|' | sort_natural: 'last' | reverse %}

<ul class="taxonomy__index">
  {% for method_pair in sorted_methods %}
    {% unless method_pair == '' %}
      {% assign parts = method_pair | split: ',' %}
      <li>
        <a href="#{{ parts[0] | slugify }}">
          <strong>{{ parts[0] }}</strong> <span class="taxonomy__count">{{ parts[1] }}</span>
        </a>
      </li>
    {% endunless %}
  {% endfor %}
</ul>

{% for method_pair in sorted_methods %}
  {% unless method_pair == '' %}
    {% assign parts = method_pair | split: ',' %}
    {% assign method_posts = site.posts | where_exp: "item", "item.hidden != true" | where_exp: "item", "item.methods contains parts[0] or (parts[0] == 'Untyped' and item.methods == nil)" %}
    <section id="{{ parts[0] | slugify }}" class="taxonomy__section">
      <h2 class="archive__subtitle">{{ parts[0] }}</h2>
      <div class="entries-{{ page.entries_layout | default: 'list' }}">
        {% for post in method_posts %}
          {% include archive-single.html type=page.entries_layout %}
        {% endfor %}
      </div>
      <a href="#page-title" class="back-to-top">{{ site.data.ui-text[site.locale].back_to_top | default: 'Back to Top' }} &uarr;</a>
    </section>
  {% endunless %}
{% endfor %}

